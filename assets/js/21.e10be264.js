(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{170:function(e,t,n){},270:function(e,t,n){"use strict";var i=n(170);n.n(i).a},309:function(e,t,n){"use strict";n.r(t);n(164),n(55);var i={components:{GIcon:n(35).a},name:"GuluTable",data:function(){return{expendedIds:[]}},props:{height:{type:Number},expendField:{type:String},orderBy:{type:Object,default:function(){return{}}},loading:{type:Boolean,default:!1},striped:{type:Boolean,default:!0},selectedItems:{type:Array,default:function(){return[]}},compact:{type:Boolean,default:!1},columns:{type:Array,required:!0},dataSource:{type:Array,required:!0,validator:function(e){return!(e.filter((function(e){return void 0===e.id})).length>0)}},numberVisible:{type:Boolean,default:!1},bordered:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1}},mounted:function(){var e=this.$refs.table.cloneNode(!1);this.table2=e,e.classList.add("gulu-table-copy");var t=this.$refs.table.children[0],n=t.getBoundingClientRect().height;if(this.$refs.tableWrapper.style.marginTop=n+"px",this.$refs.tableWrapper.style.height=this.height-n+"px",e.appendChild(t),this.$refs.wrapper.appendChild(e),this.$scopedSlots.default){var i=this.$refs.actions[0],d=i.getBoundingClientRect().width,r=i.parentNode,s=getComputedStyle(r),a=(s.getPropertyValue("padding-left"),s.getPropertyValue("padding-right")),l=s.getPropertyValue("border-left-width"),c=s.getPropertyValue("border-right-width"),o=d+parseInt(a)+parseInt(a)+parseInt(l)+parseInt(c)+"px";this.$refs.actionsHeader.style.width=o,this.$refs.actions.map((function(e){e.parentNode.style.width=o}))}},beforeDestroy:function(){this.table2.remove()},computed:{areAllItemsSelected:function(){var e=this.dataSource.map((function(e){return e.id})).sort(),t=this.selectedItems.map((function(e){return e.id})).sort();if(e.length!==t.length)return!1;for(var n=!0,i=0;i<e.length;i++)if(e[i]!==t[i]){n=!1;break}return n},expendedCellColSpan:function(){var e=0;return this.checkable&&(e+=2),this.expendField&&(e+=2),e}},watch:{selectedItems:function(){this.selectedItems.length===this.dataSource.length?this.$refs.allChecked.indeterminate=!1:0===this.selectedItems.length?this.$refs.allChecked.indeterminate=!1:this.$refs.allChecked.indeterminate=!0}},methods:{inExpendedIds:function(e){return this.expendedIds.indexOf(e)>=0},expendItem:function(e){this.inExpendedIds(e)?this.expendedIds.splice(this.expendedIds.indexOf(e),1):this.expendedIds.push(e)},changeOrderBy:function(e){var t=JSON.parse(JSON.stringify(this.orderBy)),n=t[e];t[e]="asc"===n?"desc":"desc"===n||"asc",this.$emit("update:orderBy",t)},inSelectedItems:function(e){return this.selectedItems.filter((function(t){return t.id===e.id})).length>0},onChangeItem:function(e,t,n){var i=n.target.checked,d=JSON.parse(JSON.stringify(this.selectedItems));i?d.push(e):d=d.filter((function(t){return t.id!==e.id})),this.$emit("update:selectedItems",d)},onChangeAllItems:function(e){var t=e.target.checked;this.$emit("update:selectedItems",t?this.dataSource:[])}}},d=(n(270),n(1)),r=Object(d.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"wrapper",staticClass:"gulu-table-wrapper"},[n("div",{ref:"tableWrapper",style:{height:e.height,overflow:"auto"}},[n("table",{ref:"table",staticClass:"gulu-table",class:{bordered:e.bordered,compact:e.compact,striped:e.striped}},[n("thead",[n("tr",[e.expendField?n("th",{staticClass:"gulu-table-center",style:{width:"50px"}}):e._e(),e._v(" "),e.checkable?n("th",{staticClass:"gulu-table-center",style:{width:"50px"}},[n("input",{ref:"allChecked",attrs:{type:"checkbox"},domProps:{checked:e.areAllItemsSelected},on:{change:e.onChangeAllItems}})]):e._e(),e._v(" "),e.numberVisible?n("th",{style:{width:"50px"}},[e._v("序号")]):e._e(),e._v(" "),e._l(e.columns,(function(t){return n("th",{key:t.field,style:{width:t.width+"px"}},[n("div",{staticClass:"gulu-table-header"},[e._v("\n            "+e._s(t.text)+"\n            "),t.field in e.orderBy?n("span",{staticClass:"gulu-table-sorter",on:{click:function(n){return e.changeOrderBy(t.field)}}},[n("g-icon",{class:{active:"asc"===e.orderBy[t.field]},attrs:{name:"asc"}}),e._v(" "),n("g-icon",{class:{active:"desc"===e.orderBy[t.field]},attrs:{name:"desc"}})],1):e._e()])])})),e._v(" "),e.$scopedSlots.default?n("th",{ref:"actionsHeader"}):e._e()],2)]),e._v(" "),n("tbody",[e._l(e.dataSource,(function(t,i){return[n("tr",{key:t.id},[e.expendField?n("td",{staticClass:"gulu-table-center",style:{width:"50px"}},[n("g-icon",{staticClass:"gulu-table-expendIcon",attrs:{name:"right"},on:{click:function(n){return e.expendItem(t.id)}}})],1):e._e(),e._v(" "),e.checkable?n("td",{staticClass:"gulu-table-center",style:{width:"50px"}},[n("input",{attrs:{type:"checkbox"},domProps:{checked:e.inSelectedItems(t)},on:{change:function(n){return e.onChangeItem(t,i,n)}}})]):e._e(),e._v(" "),e.numberVisible?n("td",{style:{width:"50px"}},[e._v(e._s(i+1))]):e._e(),e._v(" "),e._l(e.columns,(function(i){return[n("td",{key:i.field,style:{width:i.width+"px"}},[e._v(e._s(t[i.field]))])]})),e._v(" "),e.$scopedSlots.default?n("td",[n("div",{ref:"actions",refInFor:!0,staticStyle:{display:"inline-block"}},[e._t("default",null,{item:t})],2)]):e._e()],2),e._v(" "),e.inExpendedIds(t.id)?n("tr",{key:t.id+"-expend"},[n("td",{attrs:{colspan:e.columns.length+e.expendedCellColSpan}},[e._v("\n            "+e._s(t[e.expendField]||"空")+"\n          ")])]):e._e()]}))],2)])]),e._v(" "),e.loading?n("div",{staticClass:"gulu-table-loading"},[n("g-icon",{attrs:{name:"loading"}})],1):e._e()])}),[],!1,null,"68925085",null).exports,s={name:"GuluTableColumn",props:{text:{type:String,required:!0},field:{type:String,required:!0},width:{type:Number}}},a={components:{GTable:r,GTableColumn:Object(d.a)(s,(function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("column")])}),[],!1,null,null,null).exports},data:function(){return{selected:[],columns:[{text:"姓名",field:"name",width:100},{text:"分数",field:"score",width:400}],orderBy:{score:"desc"},loading:!1,dataSource:[{id:1,name:"战争机器",score:87,description:"xxxx xxxx"},{id:2,name:"冬兵",score:88,description:"yyyy yyyy"},{id:3,name:"雷神",score:100},{id:4,name:"黑豹",score:91},{id:5,name:"蚁人",score:92},{id:6,name:"美国队长",score:93},{id:7,name:"蜘蛛侠",score:94},{id:8,name:"钢铁侠",score:95},{id:9,name:"黑寡妇",score:80},{id:10,name:"绿巨人",score:96},{id:11,name:"鹰眼",score:90},{id:12,name:"猎鹰",score:89},{id:13,name:"绯红女巫",score:98},{id:14,name:"幻视",score:97},{id:15,name:"奇异博士",score:99}]}},methods:{edit:function(e){alert("开始编辑".concat(e.id))},view:function(e){alert("开始查看".concat(e.score))},x:function(){var e=this;this.loading=!0,setTimeout((function(){e.dataSource=e.dataSource.sort((function(e,t){return e.score-t.score})),e.loading=!1}),3e3)}}},l=Object(d.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"padding-top":"16px"}},[n("h3",[e._v("固定表头")]),e._v(" "),n("g-table",{attrs:{columns:e.columns,"data-source":e.dataSource,bordered:"","selected-items":e.selected,"order-by":e.orderBy,loading:e.loading,height:400,checkable:""},on:{"update:selectedItems":function(t){e.selected=t},"update:selected-items":function(t){e.selected=t},"update:orderBy":[function(t){e.orderBy=t},e.x],"update:order-by":function(t){e.orderBy=t}}}),e._v(" "),n("div",{staticStyle:{"padding-top":"16px"}},[n("h3",[e._v("可折叠")]),e._v(" "),n("g-table",{attrs:{columns:e.columns,"data-source":e.dataSource,"selected-items":e.selected,"expend-field":"description"},on:{"update:selectedItems":function(t){e.selected=t},"update:selected-items":function(t){e.selected=t}}})],1)],1)}),[],!1,null,"40021d5c",null);t.default=l.exports}}]);